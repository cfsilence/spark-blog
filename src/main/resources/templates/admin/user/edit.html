<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{fragments/admin}" th:with="loggedIn=${isLoggedIn}, year=${year}">

<head>
    <title>Edit User</title>
</head>

<body>

    <div layout:fragment="content">

        <div class="pad-bottom-10">
            <th:block th:if="${message}">
                <div th:replace="fragments/successContainer :: successContainer(~{::#saveMessage})">
                    <div id="saveMessage"><span th:text="${message}"></span></div>
                </div>
            </th:block>

            <th:block th:if="${error}">
                <div th:replace="fragments/errorContainer :: errorContainer(~{::#errorMessage})">
                    <div id="errorMessage"><span th:text="${error}"></span></div>
                </div>
            </th:block>
        </div>

        <h1>[[${user.get('id') ? 'Edit' : 'Create'}]] User</h1>

        <div class="pad-bottom-10">
            <a th:href="@{~/admin/user/list}" class="btn btn-primary"><i class="fa fa-angle-double-left"></i> List Users</a>
        </div>

        <form method="POST" class="form-horizontal">
            <div th:replace="fragments/fieldContainer :: fieldContainer(${user}, 'first_name', 'First Name', true, ~{::#first_name}, null, null)">
                <input type="text" id="first_name" name="first_name" class="form-control" required="true" maxlength="100" th:value="${user.get('first_name')}"/>
            </div>

            <div th:replace="fragments/fieldContainer :: fieldContainer(${user}, 'last_name', 'Last Name', true, ~{::#last_name}, null, null)">
                <input type="text" id="last_name" name="last_name" class="form-control" required="true" maxlength="100" th:value="${user.get('last_name')}"/>
            </div>

            <div th:replace="fragments/fieldContainer :: fieldContainer(${user}, 'username', 'Username', true, ~{::#username}, null, null)">
                <input type="text" id="username" name="username" class="form-control" required="true" maxlength="100" th:value="${user.get('username')}"/>
            </div>

            <div th:replace="fragments/fieldContainer :: fieldContainer(${user}, 'password', 'Password', false, ~{::#password}, null, null)">
                <input type="password" id="password" name="password" class="form-control" maxlength="100" value=""/>
            </div>

            <div th:replace="fragments/messageContainer :: messageContainer(~{::#saveMsg})">
                <div id="saveMsg">
                    <div class="text-center">
                        <button id="btnSubmit" name="btnSubmit" class="btn btn-primary">Save</button>
                        <a th:href="@{~/admin/user/list}" class="btn btn-default">Cancel</a>
                    </div>
                </div>
            </div>

        </form>
    </div>

</body>
</html>
